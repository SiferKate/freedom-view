import{j as s,r as l}from"./index-354c2a3c.js";import{u as d}from"./use-app-params-ac5a865e.js";import{a as h,b as j,H as p,s as f,c as U,B as c}from"./index-871af331.js";import{L as u,P as S}from"./page-252de3bb.js";import{D as v}from"./dialog-list-c168a6ac.js";import{S as P,U as y,M as C}from"./message-list-5e6d3913.js";import"./chunk-MZBQPWGD-8acc10ce.js";const k=({children:e})=>{const{userId:t}=d(),{data:a,isLoading:r}=h(t);return s.jsx(P,{children:s.jsx(y,{user:a,loading:r,children:e})})},G=({onGalleryLoaded:e,isPending:t=!1})=>{const{userId:a}=d(),{data:r,isFetching:i,isError:n}=j({userId:a});return l.useEffect(()=>{r&&(e==null||e(r.length))},[r,e]),i||t?s.jsx(u,{}):n?s.jsx(p,{size:"md",textAlign:"center",mt:"3",children:"Failed to load data.."}):s.jsx(C,{galleryPhotos:r,galleryOpen:!0})},H=({userId:e,loading:t})=>{const a=f.useCheckIsUserSaved(e),[r]=U(),i=()=>r(e);return s.jsx(c,{onClick:i,isLoading:t,isDisabled:a,children:a?"Saved":"Save"})},L=()=>{const{userId:e}=d(),[t,a]=l.useState(!1),[r,i]=l.useState(0),[n,g]=l.useTransition(),m=()=>{g(()=>{a(o=>!o)})},x=o=>i(o);return s.jsxs(S,{header:s.jsxs(k,{children:[s.jsx(H,{userId:Number(e)}),s.jsxs(c,{colorScheme:"blue",variant:n?t?"outline":"solid":t?"solid":"outline",onClick:m,children:["Gallery ",r>0&&`(${r})`]})]}),children:[n&&s.jsx(u,{}),!n&&s.jsxs(s.Fragment,{children:[!t&&s.jsx(v,{dialogNavigateTo:({human:o})=>`dialog/${o.id}`}),t&&s.jsx(G,{onGalleryLoaded:x})]})]})};export{L as default};
